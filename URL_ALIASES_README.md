# URL Aliases –¥–ª—è Navidrome

## üéØ –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫—Ä–∞—Å–∏–≤—ã—Ö URL —Å –∞–ª–∏–∞—Å–∞–º–∏ –≤–º–µ—Å—Ç–æ UUID, —Å–æ—Ö—Ä–∞–Ω—è—è –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

## üìù –ü—Ä–∏–º–µ—Ä—ã

### –î–æ (UUID):
```
https://domain.com/app/#/album/41ytcXCHaVedt68ikZ6H7d/show
https://domain.com/app/#/artist/2f8c8b8e-1234-5678-9abc-def012345678/show
https://domain.com/app/#/song/1a2b3c4d-5678-9abc-def0-123456789012/show
```

### –ü–æ—Å–ª–µ (–ê–ª–∏–∞—Å—ã):
```
https://domain.com/app/#/album/the-beatles-abbey-road/show
https://domain.com/app/#/artist/the-beatles/show
https://domain.com/app/#/song/the-beatles-come-together/show
```

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
- ‚úÖ `https://domain.com/app/#/album/41ytcXCHaVedt68ikZ6H7d/show`
- ‚úÖ `https://domain.com/app/#/album/the-beatles-abbey-road/show`

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `URLAlias` –≤:
- `model/album.go` - `URLAlias string`
- `model/artist.go` - `URLAlias string`  
- `model/mediafile.go` - `URLAlias string`

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ú–∏–≥—Ä–∞—Ü–∏—è `20251017000002_add_url_aliases.go` –¥–æ–±–∞–≤–ª—è–µ—Ç:
- –ö–æ–ª–æ–Ω–∫—É `url_alias VARCHAR(255)` –≤ —Ç–∞–±–ª–∏—Ü—ã `media_file`, `album`, `artist`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –∞–ª–∏–∞—Å–∞–º

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª–∏–∞—Å–æ–≤
–£—Ç–∏–ª–∏—Ç–∞ `utils/url_alias.go` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏:
- `GenerateURLAlias()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `GenerateAlbumAlias()` - –¥–ª—è –∞–ª—å–±–æ–º–æ–≤ (—Ñ–æ—Ä–º–∞—Ç: "artist-name-album-name")
- `GenerateArtistAlias()` - –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–æ–≤
- `GenerateSongAlias()` - –¥–ª—è –ø–µ—Å–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: "artist-name-song-title")

### 4. API
- Native API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –∞–ª–∏–∞—Å–∞–º
- Middleware `URLAliasMiddleware` (–∑–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤ –≤ ID

### 5. Frontend
- –£—Ç–∏–ª–∏—Ç–∞ `ui/src/utils/urlGenerator.js` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ URL
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–ª–∏–∞—Å—ã –≤ —Å—Å—ã–ª–∫–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ ID, —Ç–∞–∫ –∏ –∞–ª–∏–∞—Å–æ–≤

## üîß –§—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–ª–∏–∞—Å–æ–≤

### –ü—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
1. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ lowercase**
2. **–ó–∞–º–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:**
   - `&` ‚Üí `and`
   - `+` ‚Üí `plus`
   - `@` ‚Üí `at`
   - `#` ‚Üí `hash`
   - `%` ‚Üí `percent`
   - `*` ‚Üí `star`
   - `|` ‚Üí `or`
   - `/` ‚Üí `-`
   - `=` ‚Üí `equals`
   - –£–¥–∞–ª–µ–Ω–∏–µ: `()[]{}\\<>?!"'`~^$.,;:`

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–±–µ–ª–æ–≤:**
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã ‚Üí –æ–¥–∏–Ω –ø—Ä–æ–±–µ–ª
   - –ü—Ä–æ–±–µ–ª—ã ‚Üí –¥–µ—Ñ–∏—Å—ã

4. **–û—á–∏—Å—Ç–∫–∞:**
   - –£–¥–∞–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ—Ñ–∏—Å–æ–≤
   - –£–¥–∞–ª–µ–Ω–∏–µ –¥–µ—Ñ–∏—Å–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
```
"The Beatles - Abbey Road" ‚Üí "the-beatles-abbey-road"
"AC/DC - Highway to Hell" ‚Üí "ac-dc-highway-to-hell"
"Queen & David Bowie" ‚Üí "queen-and-david-bowie"
"Led Zeppelin (Remastered)" ‚Üí "led-zeppelin-remastered"
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Backend (Go):
```go
import "github.com/navidrome/navidrome/utils"

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª–∏–∞—Å–∞ –¥–ª—è –∞–ª—å–±–æ–º–∞
alias := utils.GenerateAlbumAlias("Abbey Road", "The Beatles")
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "the-beatles-abbey-road"

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª–∏–∞—Å–∞ –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–∞
alias := utils.GenerateArtistAlias("The Beatles")
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "the-beatles"

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª–∏–∞—Å–∞ –¥–ª—è –ø–µ—Å–Ω–∏
alias := utils.GenerateSongAlias("Come Together", "The Beatles")
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "the-beatles-come-together"
```

### Frontend (JavaScript):
```javascript
import { generateAlbumURL, generateArtistURL } from './utils/urlGenerator'

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL –¥–ª—è –∞–ª—å–±–æ–º–∞
const albumURL = generateAlbumURL(albumId, albumAlias, 'show')
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "/album/the-beatles-abbey-road/show" –∏–ª–∏ "/album/{id}/show"

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–∞
const artistURL = generateArtistURL(artistId, artistAlias, 'show')
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "/artist/the-beatles/show" –∏–ª–∏ "/artist/{id}/show"
```

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend:
1. `model/album.go` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `URLAlias`
2. `model/artist.go` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `URLAlias`
3. `model/mediafile.go` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `URLAlias`
4. `utils/url_alias.go` - —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–ª–∏–∞—Å–æ–≤
5. `db/migrations/20251017000002_add_url_aliases.go` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
6. `server/nativeapi/url_alias_middleware.go` - middleware –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤
7. `server/nativeapi/native_api.go` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### Frontend:
1. `ui/src/utils/urlGenerator.js` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ URL
2. `ui/src/song/AlbumLinkField.jsx` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤
3. `ui/src/audioplayer/AudioTitle.jsx` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
1. –ú–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –∫–æ–ª–æ–Ω–∫–∏ `url_alias`
2. –°–æ–∑–¥–∞—Å—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–ª–∏–∞—Å—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **SEO-friendly URLs** - –ø–æ–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –ª—É—á—à–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ URL
2. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ
3. **–ü–æ–¥–µ–ª–∏—Ç—å—Å—è** - –∫—Ä–∞—Å–∏–≤—ã–µ —Å—Å—ã–ª–∫–∏ –≤—ã–≥–ª—è–¥—è—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
5. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∞–ª–∏–∞—Å–æ–≤

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è middleware** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤
5. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –∞–ª–∏–∞—Å–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Navidrome
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ URL —Ä–∞–±–æ—Ç–∞—é—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–æ–≤—ã–µ URL —Å –∞–ª–∏–∞—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìã TODO

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å middleware
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∞–ª–∏–∞—Å–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–ª–∏–∞—Å–æ–≤
